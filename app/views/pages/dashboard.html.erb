<!-- see all the men that have been booked by the user -->

<div class="dashboard-container">
  <div class="row dashboard-row">
    <div class="hidden-sm hidden-xs col-md-3">
      <div class="dashboard-profile">
        <%= cl_image_tag @current_user.profile_photo.path, height: 300, width: 300, crop: :fill, radius: 5, angle:0, effect: "sepia", class: "dashboard-profile-img" %>
        <div class="dashboard-profile-info">
          <h1>Profile</h1>
          <p><%= @current_user.first_name %> <%= @current_user.last_name %></p>

          <p>Gender: <%= @current_user.gender %></p>
          <p>Email: <%= @current_user.email %></p>
       </div>

        <p></p>

        <p class="text-center padded">
        <%= link_to('Edit profile', edit_user_registration_path, { class: "btn btn-primary" })%>
        <%= link_to('Home', root_path, { class: "btn btn-primary" })%>
        </p>
      </div>
    </div>

    <div class="col-xs-12 col-md-9">
      <div class="dashboard-navbar">

      <!-- Nav tabs -->
      <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a href="#home" aria-controls="home" role="tab" data-toggle="tab">Men you booked</a></li>
        <li role="presentation"><a href="#your-men" aria-controls="profile" role="tab" data-toggle="tab">Your men</a></li>
        <li role="presentation"><a href="#requests" aria-controls="messages" role="tab" data-toggle="tab">Requests for your men</a></li>
      </ul>

      <!-- Tab panes -->
      <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="home">
          <div class="container text-center">
            <% @requests.each do |request| %>
              <% man = Man.find(request.man_id) %>

              <div class="request-row">

                <div class="requests-container">
                  <div class=>
                    <img src="<%= cl_image_path man.photos.first.path %>" class="request-img">
                    <p class="request-name"> <%= man.name %> </p>
                  </div>

                  <div class="">
                    <p> Start time: <%= request.start_time %> </p>
                    <p> End time: <%= request.end_time %> </p>
                    <p> Status: <%= request.status %> </p>
                  </div>

                  <div style="width: 200px">
                    <% if request.status == "pending" %>
                    <%= simple_form_for [man, request]  do |f| %>
                      <%= f.hidden_field :action, value: "confirm" %>
                      <%= f.submit "Accept", class: "btn btn-primary btn-float-left" %>
                    <% end %>

                    <%= simple_form_for [man, request]  do |f| %>
                      <%= f.hidden_field :action, value: "cancel" %>
                      <%= f.submit "Reject", class: "btn btn-primary btn-float-left" %>
                    <% end %>
                  <% end %>

                  <% if request.status == "confirmed" %>
                    <%= simple_form_for [man, request]  do |f| %>
                      <%= f.hidden_field :action, value: "cancel" %>
                      <%= f.submit "Cancel", class: "btn btn-primary btn-float-left" %>
                    <% end %>
                  <% end %>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        </div>


        <!-- Patricia's code below -->
        <div role="tabpanel" class="tab-pane" id="your-men">Put your code here</div>
        <div role="tabpanel" class="tab-pane" id="requests">Put your code here</div>

      </div>
      </div>
    </div>

  </div>
</div>





















<div class="user-booking-overview">
  <!-- Status check dropdown plus according action -->
  <!-- status check method-->
  <!-- <div class="dropdown">
    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
      <%= @current_choice %>
        <span class="text-right caret"></span>
    </button>
    <ul class="dropdown-menu">
      <li><a href="?bookings=all" id="all">All</a></li>
      <li><a href="?bookings=confirmed" id="confirmed">Confirmed</a></li>
      <li><a href="?bookings=pending" id="pending">Pending</a></li>
      <li><a href="?bookings=rejected" id="rejected">Rejected</a></li>
    </ul>
  </div> -->

  <div class="tabs">
    <a id="all" class="tab">All</a>
    <a id="confirmed" class="tab">Confirmed</a>
    <a id="pending" class="tab">Pending</a>
    <a id="rejected" class="tab">Rejected</a>
  </div>

  <!-- Man card -->
  <div class="container" >
    <div class="row">
      <% @bookings.each do |booking| %>
      <div class="col-xs-12 col-sm-6 col-md-4">
      <div class="card <%= booking.status %>" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.2)), url('<%= booking.man.photos.any? ? cl_image_path(booking.man.photos.first.path) : '' %>');">
        <div class="card-description">
          <h2><%= booking.man.name %></h2>
          <h3>Booked: <%= booking.start_time %> - <%= booking.end_time %></h3>
          <h3>Price: <%= booking.man.price %>RMB</h3>
          <p> Address: <%= booking.man.address%></p>
        </div>
        <%= link_to("", man_path(booking.man), class: "card-link") %>
      </div>
      </div>
      <% end %>
    </div>
  </div>
</div>
  <!-- Book more men -->
  <div>
    <p class="text-center padded">
      <%= link_to('Book another man', men_path, { class: "btn btn-primary" })%>
    </p>
  </div>
  <!-- No man booked yet button (call-to-action)-->
  <div>
    <p>You did not book any man: <%= link_to "Please make a booking", men_path, class: "btn btn-primary" %></p>
  </div>
</div>

<!-- My men that I created -->
<div class="container text-center padded">
    <% if @men.present? %>
    <div class="container text-center padded">
      <h2>Here are your Boys!</h2>
    </div>

    <div class="container">
      <div class="row">
        <% @men.each do |man| %>
        <div class="col-xs-12 col-sm-6 col-md-4">
        <div class="card" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.2)), url('<%= man.photos.any? ? cl_image_path(man.photos.first.path) : '' %>');">
          <div class="card-description">
            <h2><%= man.name %></h2>
            <h3><%= man.summary %></h3>
            <p><%= man.height %> cm  <%= man.weight %> Kg  <%= man.price %> RMB</p>
          </div>
          <%= link_to("", man_path(man), class: "card-link") %>
        </div>
        </div>
        <% end %>
      </div>
    </div>

  <% else %>
    <div class="container text-center" style="margin-top: 100px">
     <h3 id="empty">You don't seem to own any Hunks...</h3>
    </div>
  <% end %>
</div>

<!-- Man assets -->
<div class="container text-center">
  <% @requests.each do |request| %>
    <% man = Man.find(request.man_id) %>

    <div class="request-row">
      <div class="requests-container">
        <div class=>
          <img src="<%= cl_image_path man.photos.first.path %>" class="request-img">
          <p class="request-name"> <%= man.name %> </p>
        </div>

        <div class="">
          <p> Start time: <%= request.start_time %> </p>
          <p> End time: <%= request.end_time %> </p>
          <p> Status: <%= request.status %> </p>
        </div>

        <div style="width: 200px">
          <% if request.status == "pending" %>
          <%= simple_form_for [man, request]  do |f| %>
            <%= f.hidden_field :action, value: "confirm" %>
            <%= f.submit "Accept", class: "btn btn-primary btn-float-left" %>
          <% end %>

          <%= simple_form_for [man, request]  do |f| %>
            <%= f.hidden_field :action, value: "cancel" %>
            <%= f.submit "Reject", class: "btn btn-primary btn-float-left" %>
          <% end %>
        <% end %>

        <% if request.status == "confirmed" %>
          <%= simple_form_for [man, request]  do |f| %>
            <%= f.hidden_field :action, value: "cancel" %>
            <%= f.submit "Cancel", class: "btn btn-primary btn-float-left" %>
          <% end %>
        <% end %>

        </div>
      </div>
    </div>
  <% end %>
</div>






